<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Music Student MVP</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>üéµ App para Estudiantes de M√∫sica (MVP)</h1>

  <!-- Audio Upload -->
  <section>
    <label for="audioFile">Sube tu audio (MP3 o MP4):</label>
    <input type="file" id="audioFile" accept="audio/mp3,audio/mpeg,video/mp4" />
    <br />
    <audio id="audioPlayer" controls style="width: 100%; margin-top: 10px;"></audio>
    <br />
    <button id="markFirstNote" disabled>La primera nota entra aqu√≠</button>
  </section>

  <!-- Score Upload -->
  <section>
    <label for="scoreFile">Sube tu partitura (PDF, JPG o PNG):</label>
    <input type="file" id="scoreFile" accept=".pdf,.jpg,.jpeg,.png" />
    <div id="scoreContainer" style="margin-top: 10px; text-align: center; min-height: 400px;"></div>
  </section>

  <!-- Offset Display -->
  <section>
    <p id="offsetStatus">Desfase actual: 0s (ajustado autom√°ticamente o manual)</p>
    <label for="manualOffset">Ajuste manual (segundos):</label>
    <input type="number" id="manualOffset" step="0.1" value="0" />
    <button id="applyManualOffset">Aplicar ajuste manual</button>
  </section>

  <!-- Etapa 2: Sincronizaci√≥n r√≠tmica -->
  <section id="rhythmSection">
    <label for="bpmInput">BPM (beats per minute):</label>
    <input type="number" id="bpmInput" min="20" max="300" placeholder="Ej. 120" />
    <button id="startSync">Iniciar sincronizaci√≥n r√≠tmica</button>
    <button id="stopSync">Detener</button>
    <p id="measureInfo">Duraci√≥n de comp√°s: -- segundos</p>
    <label>
      <input type="checkbox" id="followMode" checked />
      Modo ‚Äúseguir siempre‚Äù (no se detiene)
    </label>
  </section>

  <!-- Indicador fijo de comp√°s actual -->
  <div id="currentMeasureIndicator" style="display: none;">
    Comp√°s actual: <span id="currentMeasureNumber">0</span>
  </div>

  <!-- Cargar PDF.js -->
  <script src="pdfjs/pdf.min.js"></script>
  <script>
    // Configurar worker de PDF.js
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'pdfjs/pdf.worker.min.js';
  </script>
  <script src="script.js"></script>
</body>
</html>
